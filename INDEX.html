<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DAGA ‚Äî CD Curso Arquitectura de Datos</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#000; color:#f1f5f9; }

    header {
      position: sticky;
      top: 0;
      background: linear-gradient(90deg, #0f172a, #1f2937);
      color: white;
      padding: 12px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      z-index: 999;
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    }
    .brand { display:flex; gap:12px; align-items:center; }
    .logo { width:44px; height:44px; border-radius:8px; background:linear-gradient(135deg,#10b981,#06b6d4); display:flex; align-items:center; justify-content:center; font-weight:900; color:white; font-size:18px; }
    .brand .title { font-weight:700; font-size:18px; }
    .brand .subtitle { font-size:13px; color:#cbd5e1; }

    .controls { display:flex; gap:12px; align-items:center; }
    button { background:#111827; color:#fff; padding:8px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); cursor:pointer; transition: all 0.2s ease; }
    button:hover { opacity: 0.9; }
    button.primary { background:#06b6d4; color:#042027; border:none; font-weight:600; }

    .hidden { display:none !important; }

    main { max-width:1100px; margin:22px auto; padding:0 16px; }
    .panel { background:#1e293b; padding:16px; border-radius:10px; border:1px solid #334155; margin-bottom:20px; color:#f1f5f9; }

    h3 { margin-bottom:10px; }
    h4 { margin:14px 0 6px; color:#38bdf8; grid-column:1 / -1; }

    /* GRID para mostrar archivos */
    #docsContainer {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 16px;
    }

    .file-card {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 12px;
      padding: 14px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: #e2e8f0;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: transform 0.2s ease;
    }
    .file-card:hover {
      transform: scale(1.03);
    }

    .file-name {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 10px;
      word-wrap: break-word;
    }

    .file-actions {
      margin-top: auto;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .btn-view, .btn-download, .btn-delete {
      flex: 1;
      text-align: center;
      font-size: 13px;
      padding: 6px;
      border-radius: 8px;
      text-decoration: none;
    }
    .btn-view { background:#3b82f6; color:white; }
    .btn-download { background:#10b981; color:white; }
    .btn-delete { background:#ef4444; color:white; border:none; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">DG</div>
      <div>
        <div class="title">DAGA</div>
        <div class="subtitle">CD Curso Arquitectura de Datos</div>
      </div>
    </div>
    <div class="controls">
      <div id="userGreeting" class="small">Bienvenido, invitado</div>
      <button id="loginBtn">Login</button>
    </div>
  </header>

  <main>
    <!-- Subir archivos (solo DAGA) -->
    <div id="uploadPanel" class="panel hidden">
      <h3>Subir archivos</h3>
      <label for="semana">Selecciona semana:</label>
      <select id="semana">
        <option value="Semana 1">Semana 1</option>
        <option value="Semana 2">Semana 2</option>
        <option value="Semana 3">Semana 3</option>
        <option value="Semana 4">Semana 4</option>
        <option value="Semana 5">Semana 5</option>
      </select><br><br>
      <input type="file" id="fileUpload"><br><br>
      <button onclick="guardar()">Guardar</button>
    </div>

    <!-- Ver y descargar -->
    <div id="filesPanel" class="panel">
      <h3>Mis Documentos</h3>
      <div id="docsContainer"></div>
      <br>
      <button onclick="logout()" id="logoutBtn" class="hidden">Cerrar Sesi√≥n</button>
    </div>
  </main>

  <!-- Modal login -->
  <div id="modal" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);align-items:center;justify-content:center;z-index:1200;">
    <div style="background:white;padding:18px;border-radius:10px;width:320px;box-shadow:0 8px 30px rgba(2,6,23,0.4);">
      <h3>Iniciar sesi√≥n</h3>
      <input id="username" type="text" placeholder="Usuario" style="width:100%;margin-bottom:10px;padding:8px;border:1px solid #cbd5e1;border-radius:8px;" />
      <input id="password" type="password" placeholder="Contrase√±a" style="width:100%;margin-bottom:10px;padding:8px;border:1px solid #cbd5e1;border-radius:8px;" />
      <div style="display:flex;gap:8px;justify-content:flex-end;">
        <button id="closeModal">Cancelar</button>
        <button id="doLogin" class="primary">Entrar</button>
      </div>
    </div>
  </div>

<script>
  const loginBtn = document.getElementById("loginBtn");
  const modal = document.getElementById("modal");
  const closeModal = document.getElementById("closeModal");
  const doLogin = document.getElementById("doLogin");
  const uploadPanel = document.getElementById("uploadPanel");
  const docsContainer = document.getElementById("docsContainer");
  const userGreeting = document.getElementById("userGreeting");
  const logoutBtn = document.getElementById("logoutBtn");

  // üìÇ Documentos predeterminados
  const defaultDocs = {
    "Semana 1": ["semana1mapa.png"],
    "Semana 2": ["TRABAJO1_SEMANA2_CARLOS.pdf"],
    "Semana 3": ["documento2.png"],
    "Semana 4": ["resumen_final.pdf"]
  };

  // Inicializar docs si no existen
  if (!localStorage.getItem("docs")) {
    localStorage.setItem("docs", JSON.stringify(defaultDocs));
  }

  loginBtn.onclick = ()=> modal.style.display="flex";
  closeModal.onclick = ()=> modal.style.display="none";

  doLogin.onclick = ()=> {
    let user = document.getElementById("username").value.trim();
    let pass = document.getElementById("password").value.trim();

    if(user === "DAGA" && pass === "74128745"){
      modal.style.display="none";
      localStorage.setItem("logged", "DAGA");
      userGreeting.textContent = "Bienvenido, " + user;
      uploadPanel.classList.remove("hidden");
      logoutBtn.classList.remove("hidden");
      mostrarArchivos();
    } else {
      alert("Usuario o contrase√±a incorrectos");
    }
  };

  function guardar() {
    let semana = document.getElementById("semana").value;
    let file = document.getElementById("fileUpload").files[0];

    if (file) {
      let docs = JSON.parse(localStorage.getItem("docs")) || {};
      if (!docs[semana]) docs[semana] = [];
      docs[semana].push(file.name);
      localStorage.setItem("docs", JSON.stringify(docs));
      mostrarArchivos();
    } else {
      alert("Selecciona un archivo");
    }
  }

  function eliminar(semana, index){
    let docs = JSON.parse(localStorage.getItem("docs"));
    docs[semana].splice(index,1);
    localStorage.setItem("docs", JSON.stringify(docs));
    mostrarArchivos();
  }

  function mostrarArchivos() {
    let docs = JSON.parse(localStorage.getItem("docs")) || {};
    docsContainer.innerHTML = "";
    const logged = localStorage.getItem("logged");

    // Ordenar semanas en orden ascendente
    let semanasOrdenadas = Object.keys(docs).sort((a, b) => {
      let numA = parseInt(a.replace("Semana ", "")) || 0;
      let numB = parseInt(b.replace("Semana ", "")) || 0;
      return numA - numB;
    });

    for (let semana of semanasOrdenadas) {
      let h4 = document.createElement("h4");
      h4.textContent = semana;
      docsContainer.appendChild(h4);

      docs[semana].forEach((f, i) => {
        let card = document.createElement("div");
        card.className = "file-card";
        card.innerHTML = `
          <div class="file-name">${f}</div>
          <div class="file-actions">
            <a href="${f}" target="_blank" class="btn-view">Ver</a>
            <a href="${f}" download class="btn-download">Descargar</a>
            ${logged==="DAGA" ? `<button class="btn-delete" onclick="eliminar('${semana}',${i})">Eliminar</button>` : ""}
          </div>
        `;
        docsContainer.appendChild(card);
      });
    }
  }

  function logout() {
    localStorage.removeItem("logged");
    uploadPanel.classList.add("hidden");
    logoutBtn.classList.add("hidden");
    userGreeting.textContent = "Bienvenido, invitado";
    mostrarArchivos();
  }

  // Siempre que cargue: mostrar documentos ya existentes como invitado
  window.onload = ()=> {
    const logged = localStorage.getItem("logged");
    if (logged === "DAGA") {
      userGreeting.textContent = "Bienvenido, DAGA";
      uploadPanel.classList.remove("hidden");
      logoutBtn.classList.remove("hidden");
    } else {
      userGreeting.textContent = "Bienvenido, invitado";
    }
    mostrarArchivos();
  };
</script>
</body>
</html>
